<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 50px; }
        .container { max-width: 600px; margin: auto; }
        .topic { background: #007bff; color: white; padding: 10px; margin: 10px 0; cursor: pointer; border-radius: 5px; }
        .lessons { display: none; padding: 10px; background: #f1f1f1; border-radius: 5px; }
        .lesson { cursor: pointer; color: #007bff; text-decoration: underline; margin: 5px 0; }
        .completed { color: green; font-weight: bold; }
        .video-container, .quiz-container { display: none; margin-top: 20px; }
        iframe { width: 100%; height: 250px; }
        button { padding: 10px 15px; background: #28a745; color: white; border: none; cursor: pointer; margin-top: 10px; }
        button:hover { background: #218838; }
    </style>
</head>
<body>

    <h2>Welcome, <span id="employeeName"></span>!</h2>
    <button onclick="logout()">Logout</button>

    <div class="container">
        <h2>Course Dashboard</h2>

        <!-- Topic 1 -->
        <div class="topic" onclick="toggleLessons('welcome')">Welcome to DF Dynamics</div>
        <div id="welcome" class="lessons">
            <div class="lesson" onclick="showVideo('Welcome to DF Dynamics', 'lesson1')">Introduction Video <span id="lesson1-status"></span></div>
        </div>

        <!-- Topic 2 -->
        <div class="topic" onclick="toggleLessons('prompting')">Prompting Methods</div>
        <div id="prompting" class="lessons">
            <div class="lesson" onclick="showVideo('What is Prompting?', 'lesson2')" id="lesson2" disabled>What is Prompting? <span id="lesson2-status"></span></div>
            <div class="lesson" onclick="showVideo('Advanced Prompting', 'lesson3')" id="lesson3" disabled>Advanced Prompting <span id="lesson3-status"></span></div>
        </div>

        <!-- Topic 3 -->
        <div class="topic" onclick="toggleLessons('editor')">Text Editor Setup</div>
        <div id="editor" class="lessons">
            <div class="lesson" onclick="showVideo('Setting Up Your Editor', 'lesson4')" id="lesson4" disabled>Setting Up Your Editor <span id="lesson4-status"></span></div>
            <div class="lesson" onclick="showVideo('Customizing Editor', 'lesson5')" id="lesson5" disabled>Customizing Your Editor <span id="lesson5-status"></span></div>
        </div>

        <!-- Video and Quiz Section -->
        <div id="videoContainer" class="video-container">
            <h3 id="videoTitle"></h3>
            <iframe id="videoFrame" allowfullscreen></iframe>
            <br><br>
            <button onclick="completeLesson()">Mark as Completed</button>
        </div>

        <div id="quizContainer" class="quiz-container">
            <h3>Quiz</h3>
            <p id="quizQuestion"></p>
            <button onclick="checkAnswer(true)">‚úî True</button>
            <button onclick="checkAnswer(false)">‚ùå False</button>
        </div>

        <div id="certificateContainer" style="display:none;">
            <h2>üéâ Congratulations!</h2>
            <p>You have completed all lessons and quizzes!</p>
            <button onclick="generateCertificate()">Download Certificate</button>
        </div>
    </div>

    <script>
        const loggedInEmployee = localStorage.getItem("loggedInEmployee");
        if (!loggedInEmployee) {
            window.location.href = "index.html"; 
        } else {
            document.getElementById("employeeName").innerText = loggedInEmployee;
        }

        function toggleLessons(topicId) {
            const lessonsDiv = document.getElementById(topicId);
            lessonsDiv.style.display = (lessonsDiv.style.display === "block") ? "none" : "block";
        }

        let currentLesson = "";
        function showVideo(title, lessonId) {
            document.getElementById("videoTitle").innerText = title;
            document.getElementById("videoFrame").src = getVideoUrl(lessonId);
            document.getElementById("videoContainer").style.display = "block";
            document.getElementById("quizContainer").style.display = "none";
            currentLesson = lessonId;
        }

        function completeLesson() {
            if (currentLesson) {
                localStorage.setItem(currentLesson, "completed");
                updateLessonStatus();
                alert("Lesson marked as completed!");
                unlockNextLesson(currentLesson);
                showQuiz();
            }
        }

        function showQuiz() {
            const quizQuestions = {
                "lesson1": "Is DF Dynamics a training platform?",
                "lesson2": "Prompting means structuring your questions?",
                "lesson3": "Advanced prompting is not useful?",
                "lesson4": "Text editors help developers?",
                "lesson5": "Customizing an editor improves workflow?"
            };
            document.getElementById("quizQuestion").innerText = quizQuestions[currentLesson];
            document.getElementById("quizContainer").style.display = "block";
        }

        function checkAnswer(answer) {
            if (answer) {
                localStorage.setItem(currentLesson + "-quiz", "passed");
                updateLessonStatus();
                alert("Quiz passed!");
                unlockNextLesson(currentLesson + "-quiz");
                checkAllCompleted();
            } else {
                alert("Wrong answer! Try again.");
            }
        }

        function updateLessonStatus() {
            const lessons = ["lesson1", "lesson2", "lesson3", "lesson4", "lesson5"];
            lessons.forEach(lesson => {
                if (localStorage.getItem(lesson) === "completed") {
                    document.getElementById(`${lesson}-status`).innerText = "‚úî Completed";
                    document.getElementById(lesson).classList.add("completed");
                }
            });
        }

        function unlockNextLesson(lessonId) {
            const lessonOrder = ["lesson1", "lesson2", "lesson3", "lesson4", "lesson5"];
            const index = lessonOrder.indexOf(lessonId.replace("-quiz", ""));
            if (index !== -1 && index < lessonOrder.length - 1) {
                const nextLesson = lessonOrder[index + 1];
                document.getElementById(nextLesson).removeAttribute("disabled");
            }
        }

        function checkAllCompleted() {
            const allCompleted = ["lesson1-quiz", "lesson2-quiz", "lesson3-quiz", "lesson4-quiz", "lesson5-quiz"]
                .every(quiz => localStorage.getItem(quiz) === "passed");
            if (allCompleted) {
                document.getElementById("certificateContainer").style.display = "block";
            }
        }

        function generateCertificate() {
            alert("Certificate Downloaded! (Feature Coming Soon)");
        }

        function logout() {
            localStorage.removeItem("loggedInEmployee");
            window.location.href = "index.html"; 
        }

        updateLessonStatus();
    </script>

</body>
</html>
